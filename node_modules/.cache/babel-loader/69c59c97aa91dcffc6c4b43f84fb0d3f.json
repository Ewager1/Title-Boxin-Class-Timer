{"ast":null,"code":"var _jsxFileName = \"/Users/edizzle/Desktop/Web Dev Projects/title-interval-app/title_interal_app/src/pages/IntervalTimer.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { TimerHeader } from \"../components/Timer/TimerHeader\";\nimport { TimerBody } from \"../components/Timer/TimerBody\";\nimport { TimerFooter } from \"../components/Timer/TimerFooter\";\nimport TimerContext from \"../store/timer-context\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const IntervalTimer = () => {\n  _s();\n\n  // holds all the data used to decide how many rounds, time of each round, etc.\n  const ctx = useContext(TimerContext); //holds current round. used to trigger useEffect for next round\n\n  const [classSegment, setClassSegment] = useState(\"Warmup\"); // made setInterval clearable globally\n\n  const [intervalId, setIntervalId] = useState(); //holds current time state\n\n  const [timer, setTimer] = useState({\n    displayedTime: ctx.isTrainingMode ? \"3:00\" : `${ctx.userChoice.warmUpTime}:00`,\n    minutes: 0,\n    seconds: 0,\n    maxRoundTime: 7\n  }); // pause state\n\n  const [isPaused, setIsPaused] = useState(false);\n  useEffect(() => {\n    //Training mode has its own logic function\n    if (ctx.isTrainingMode) {\n      switch (classSegment) {\n        case \"Warmup\":\n          setClassSegment(\"Continuous Rounds\");\n          break;\n\n        case \"Continuous Rounds\":\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: 3\n          }));\n          countdown(3, 0);\n          break;\n\n        case `Continuous Active Rest`:\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: 1\n          }));\n          countdown(1, 0);\n          break;\n\n        default:\n      }\n    } else {\n      //regular class timers (not training mode)\n      switch (classSegment) {\n        case \"Warmup\":\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: ctx.userChoice.warmUpTime\n          }));\n          countdown(ctx.userChoice.warmUpTime, 0);\n          break;\n\n        case \"Gloves On\":\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: ctx.userChoice.glovesOnOffTime\n          }));\n          countdown(ctx.userChoice.glovesOnOffTime, 0);\n          break;\n\n        case `Round ${ctx.userChoice.currentRound}`:\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: ctx.userChoice.roundTime\n          }));\n          countdown(ctx.userChoice.roundTime, 0);\n          break;\n\n        case \"Active Rest\":\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: ctx.userChoice.activeRestTime\n          }));\n          countdown(ctx.userChoice.activeRestTime, 0);\n          break;\n\n        case \"Gloves Off\":\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: ctx.userChoice.glovesOnOffTime\n          }));\n          countdown(ctx.userChoice.glovesOnOffTime, 0);\n          break;\n\n        case \"Core\":\n          setTimer(prevState => ({ ...prevState,\n            maxRoundTime: ctx.userChoice.coreTime\n          }));\n          countdown(ctx.userChoice.coreTime, 0);\n          break;\n\n        default:\n      }\n    }\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [classSegment]); //inputs minutes and seconds and outputs a timer in conjunction with state\n\n  const countdown = (numOfMinutes, numOfSeconds) => {\n    let minutes = numOfMinutes;\n    let seconds = numOfSeconds;\n    const interval = setInterval(() => {\n      let digit = seconds < 10 ? \"0\" : \"\";\n      setTimer(prevState => ({ ...prevState,\n        minutes: minutes,\n        seconds: seconds,\n        displayedTime: `${minutes}:${digit}${seconds}`\n      }));\n      if (isPaused) seconds--;\n\n      if (minutes === 0 && seconds < 0) {\n        clearInterval(interval);\n        ctx.isTrainingMode ? handleTrainingMode() : handleClassSegment();\n      }\n\n      if (minutes > 0 && seconds < 0) {\n        minutes--;\n        seconds = 59;\n      }\n    }, 1000);\n    setIntervalId(interval);\n  }; //handles natural logic flow\n\n\n  const handleClassSegment = () => {\n    switch (classSegment) {\n      case \"Warmup\":\n        setClassSegment(\"Gloves On\");\n        break;\n\n      case \"Gloves On\":\n        setClassSegment(`Round ${ctx.userChoice.currentRound}`);\n        break;\n\n      case `Round ${ctx.userChoice.currentRound}`:\n        if (ctx.userChoice.currentRound === ctx.userChoice.totalRounds) {\n          setClassSegment(\"Gloves Off\");\n        } else {\n          ctx.setuserChoice({ ...ctx.userChoice,\n            currentRound: ctx.userChoice.currentRound += 1\n          });\n          setClassSegment(\"Active Rest\");\n        }\n\n        break;\n\n      case \"Active Rest\":\n        setClassSegment(`Round ${ctx.userChoice.currentRound}`);\n        break;\n\n      case \"Gloves Off\":\n        setClassSegment(\"Core\");\n        break;\n\n      case \"Core\":\n        console.log(\"class done, this will reroute to home page \");\n        break;\n\n      default:\n    }\n  };\n\n  const handleTrainingMode = () => {\n    switch (classSegment) {\n      case \"Warmup\":\n        setClassSegment(\"Continuous Rounds\");\n        break;\n\n      case \"Continuous Rounds\":\n        setClassSegment(\"Continuous Active Rest\");\n        break;\n\n      case \"Continuous Active Rest\":\n        setClassSegment(\"Continuous Rounds\");\n        break;\n\n      default:\n    }\n  };\n\n  const pause = () => {\n    clearInterval(intervalId);\n    setIsPaused(true);\n  };\n\n  const play = () => {\n    countdown(timer.minutes, timer.seconds);\n    setIsPaused(false);\n  };\n\n  const rewind = () => {\n    let addedMinute = timer.minutes + 1;\n    let addedSeconds = timer.seconds + 15 - 60;\n    let digit = timer.seconds < 10 ? \"0\" : \"\";\n    clearInterval(intervalId); //stops rewind from going over rounds maximum time\n\n    if (timer.minutes === timer.maxRoundTime) {\n      countdown(timer.minutes, timer.seconds);\n\n      if (isPaused) {\n        clearInterval(intervalId);\n      }\n    } //stop rewind from going over rounds maximum time\n    else if (timer.minutes + 1 === timer.maxRoundTime && timer.seconds > 45) {\n        countdown(timer.maxRoundTime, 0);\n\n        if (isPaused) {\n          console.log('cleared');\n          clearInterval(intervalId);\n        }\n      } // go up a minute if 15 seconds pushes over 60\n      else if (timer.seconds > 45) {\n          countdown(addedMinute, addedSeconds);\n\n          if (isPaused) {\n            console.log('cleared');\n            clearInterval(intervalId);\n          }\n        } // go up a minute with no added seconds at 45\n        else if (timer.seconds === 45) {\n            countdown(addedMinute, 0);\n\n            if (isPaused) {\n              console.log('cleared');\n              clearInterval(intervalId);\n            }\n          } // else add 15 seconds\n          else {\n              countdown(timer.minutes, timer.seconds + 15);\n\n              if (isPaused) {\n                console.log('cleared');\n                clearInterval(intervalId);\n              }\n            }\n\n    if (isPaused) clearInterval(intervalId);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(TimerHeader, {\n      handleClearInterval: () => clearInterval\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TimerBody, {\n      displayedTime: timer.displayedTime,\n      play: play,\n      pause: pause,\n      isPaused: isPaused,\n      rewind: rewind\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TimerFooter, {\n      classSegment: classSegment\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(IntervalTimer, \"IgEZ3Z/B4mPWIXujsMJiSm+Migw=\");\n\n_c = IntervalTimer;\n\nvar _c;\n\n$RefreshReg$(_c, \"IntervalTimer\");","map":{"version":3,"sources":["/Users/edizzle/Desktop/Web Dev Projects/title-interval-app/title_interal_app/src/pages/IntervalTimer.js"],"names":["React","useState","useEffect","useContext","TimerHeader","TimerBody","TimerFooter","TimerContext","IntervalTimer","ctx","classSegment","setClassSegment","intervalId","setIntervalId","timer","setTimer","displayedTime","isTrainingMode","userChoice","warmUpTime","minutes","seconds","maxRoundTime","isPaused","setIsPaused","prevState","countdown","glovesOnOffTime","currentRound","roundTime","activeRestTime","coreTime","clearInterval","numOfMinutes","numOfSeconds","interval","setInterval","digit","handleTrainingMode","handleClassSegment","totalRounds","setuserChoice","console","log","pause","play","rewind","addedMinute","addedSeconds"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\n\nimport { TimerHeader } from \"../components/Timer/TimerHeader\";\nimport { TimerBody } from \"../components/Timer/TimerBody\";\nimport { TimerFooter } from \"../components/Timer/TimerFooter\";\n\nimport TimerContext from \"../store/timer-context\";\n\nexport const IntervalTimer = () => {\n  // holds all the data used to decide how many rounds, time of each round, etc.\n  const ctx = useContext(TimerContext);\n\n  //holds current round. used to trigger useEffect for next round\n  const [classSegment, setClassSegment] = useState(\"Warmup\");\n\n  // made setInterval clearable globally\n  const [intervalId, setIntervalId] = useState();\n\n  //holds current time state\n  const [timer, setTimer] = useState({\n    displayedTime: ctx.isTrainingMode\n      ? \"3:00\"\n      : `${ctx.userChoice.warmUpTime}:00`,\n    minutes: 0,\n    seconds: 0,\n    maxRoundTime: 7,\n  });\n  // pause state\n  const [isPaused, setIsPaused] = useState(false);\n\n  useEffect(() => {\n    //Training mode has its own logic function\n    if (ctx.isTrainingMode) {\n      switch (classSegment) {\n        case \"Warmup\":\n          setClassSegment(\"Continuous Rounds\");\n          break;\n        case \"Continuous Rounds\":\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: 3,\n          }));\n\n          countdown(3, 0);\n          break;\n        case `Continuous Active Rest`:\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: 1,\n          }));\n          countdown(1, 0);\n          break;\n        default:\n      }\n    } else {\n      //regular class timers (not training mode)\n      switch (classSegment) {\n        case \"Warmup\":\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: ctx.userChoice.warmUpTime,\n          }));\n          countdown(ctx.userChoice.warmUpTime, 0);\n\n          break;\n        case \"Gloves On\":\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: ctx.userChoice.glovesOnOffTime,\n          }));\n          countdown(ctx.userChoice.glovesOnOffTime, 0);\n\n          break;\n        case `Round ${ctx.userChoice.currentRound}`:\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: ctx.userChoice.roundTime,\n          }));\n          countdown(ctx.userChoice.roundTime, 0);\n\n          break;\n        case \"Active Rest\":\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: ctx.userChoice.activeRestTime,\n          }));\n          countdown(ctx.userChoice.activeRestTime, 0);\n\n          break;\n        case \"Gloves Off\":\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: ctx.userChoice.glovesOnOffTime,\n          }));\n          countdown(ctx.userChoice.glovesOnOffTime, 0);\n\n          break;\n        case \"Core\":\n          setTimer((prevState) => ({\n            ...prevState,\n            maxRoundTime: ctx.userChoice.coreTime,\n          }));\n          countdown(ctx.userChoice.coreTime, 0);\n\n          break;\n        default:\n      }\n    }\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [classSegment]);\n\n  //inputs minutes and seconds and outputs a timer in conjunction with state\n  const countdown = (numOfMinutes, numOfSeconds) => {\n    let minutes = numOfMinutes;\n    let seconds = numOfSeconds;\n\n    const interval = setInterval(() => {\n      let digit = seconds < 10 ? \"0\" : \"\";\n\n      setTimer((prevState) => ({\n        ...prevState,\n        minutes: minutes,\n        seconds: seconds,\n        displayedTime: `${minutes}:${digit}${seconds}`,\n      }));\n\n     if(isPaused)\n\n      seconds--;\n\n      if (minutes === 0 && seconds < 0) {\n        clearInterval(interval);\n        ctx.isTrainingMode ? handleTrainingMode() : handleClassSegment();\n      }\n\n      if (minutes > 0 && seconds < 0) {\n        minutes--;\n        seconds = 59;\n      }\n    }, 1000);\n    setIntervalId(interval);\n  };\n\n  //handles natural logic flow\n  const handleClassSegment = () => {\n    switch (classSegment) {\n      case \"Warmup\":\n        setClassSegment(\"Gloves On\");\n        break;\n      case \"Gloves On\":\n        setClassSegment(`Round ${ctx.userChoice.currentRound}`);\n        break;\n      case `Round ${ctx.userChoice.currentRound}`:\n        if (ctx.userChoice.currentRound === ctx.userChoice.totalRounds) {\n          setClassSegment(\"Gloves Off\");\n        } else {\n          ctx.setuserChoice({\n            ...ctx.userChoice,\n            currentRound: (ctx.userChoice.currentRound += 1),\n          });\n          setClassSegment(\"Active Rest\");\n        }\n        break;\n      case \"Active Rest\":\n        setClassSegment(`Round ${ctx.userChoice.currentRound}`);\n\n        break;\n      case \"Gloves Off\":\n        setClassSegment(\"Core\");\n        break;\n      case \"Core\":\n        console.log(\"class done, this will reroute to home page \");\n        break;\n      default:\n    }\n  };\n\n  const handleTrainingMode = () => {\n    switch (classSegment) {\n      case \"Warmup\":\n        setClassSegment(\"Continuous Rounds\");\n        break;\n      case \"Continuous Rounds\":\n        setClassSegment(\"Continuous Active Rest\");\n        break;\n      case \"Continuous Active Rest\":\n        setClassSegment(\"Continuous Rounds\");\n        break;\n      default:\n    }\n  };\n\n  const pause = () => {\n    clearInterval(intervalId);\n    setIsPaused(true);\n  };\n\n  const play = () => {\n    countdown(timer.minutes, timer.seconds);\n    setIsPaused(false);\n  };\n\n  const rewind = () => {\n    let addedMinute = timer.minutes + 1;\n    let addedSeconds = timer.seconds + 15 - 60;\n    let digit = timer.seconds < 10 ? \"0\" : \"\";\n\n\n    clearInterval(intervalId);\n\n    //stops rewind from going over rounds maximum time\n    if (timer.minutes === timer.maxRoundTime) {\n      countdown(timer.minutes, timer.seconds);\n      if (isPaused) {\n       clearInterval(intervalId)\n      } \n    }\n    //stop rewind from going over rounds maximum time\n    else if (timer.minutes + 1 === timer.maxRoundTime && timer.seconds > 45) {\n      countdown(timer.maxRoundTime, 0);\n      if (isPaused) {\n        console.log('cleared')\n       clearInterval(intervalId)\n      } \n    }\n    // go up a minute if 15 seconds pushes over 60\n    else if (timer.seconds > 45) {\n      countdown(addedMinute, addedSeconds);\n      if (isPaused) {\n        console.log('cleared')\n       clearInterval(intervalId)\n      } \n    }\n    // go up a minute with no added seconds at 45\n    else if (timer.seconds === 45) {\n      countdown(addedMinute, 0);\n      if (isPaused) {\n        console.log('cleared')\n        clearInterval(intervalId)\n      } \n    }\n    // else add 15 seconds\n    else {\n      countdown(timer.minutes, timer.seconds + 15);\n      if (isPaused) {\n        console.log('cleared')\n       clearInterval(intervalId)\n      } \n    }\n\n    if(isPaused) clearInterval(intervalId)\n  };\n\n  return (\n    <>\n      <TimerHeader handleClearInterval={() => clearInterval} />\n      <TimerBody\n        displayedTime={timer.displayedTime}\n        play={play}\n        pause={pause}\n        isPaused={isPaused}\n        rewind={rewind}\n      />\n      <TimerFooter classSegment={classSegment} />\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}